/**
 @name fiple.js
 @description Mini library for creating websites
 @copyright (c) marshallovski 2025
 @license MIT
 @version 1.1.7
 * Last updated: 28.12.2025
 */
"use strict";class Fiple{constructor(e,t){this.root=e,this.disableHTMLErrors=t}_htmlError(e){if(this.disableHTMLErrors)console.error(e);else{const t=e=>String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/`/g,"&#96;");let r;switch(e){case"RtreeEmpty":r='Render tree is empty.<br><a class="fiple_link" href="https://marshallovski.github.io/fiple/docs/?article=RtreeEmpty" target="_blank">Learn more</a>';break;case"missingRootElem":r='You must provide the root element.<br><a class="fiple_link" href="https://marshallovski.github.io/fiple/docs/?article=missingRootElem" target="_blank">Learn more</a>';break;default:r=t(e).replace(/\r\n|\r|\n/g,"<br>")}this.root.innerHTML=`<br><div class="fiple_err"><h1>Render Error</h1><p class="fiple_desc">${r}</p><p class="fiple_sub">Powered by <a href="https://github.com/marshallovski/fiplejs">fiple.js</a></p></div>`}}_init(e){return this.root&&this.root instanceof HTMLElement?e[0]&&0!==e[0].length?void 0:this._htmlError("RtreeEmpty"):this._htmlError("missingRootElem")}async render(e,t={},r={}){this._init(e);const s=document.createDocumentFragment(),i=e=>{const t=document.createElement(e.elem);if("string"==typeof e.content){const t=/<%([^%>]+)?%>/g;let s;for(;s=t.exec(e.content);)e.content=e.content.replaceAll(s[0],r[s[1]])}return e.style&&Object.entries(e.style).forEach((e=>t.style[e[0]]=e[1])),e.class&&e.class.forEach((e=>t.classList.add(e))),e.events&&Object.entries(e.events).forEach((e=>t.addEventListener(e[0],e[1]))),e.id&&(t.id=e.id),e.content&&(t.innerHTML=e.content),Object.entries(e).forEach((([e,r])=>{if(!["elem","style","class","events","id","content","child"].includes(e))try{t.setAttribute(e,r)}catch{}})),e.child&&Array.isArray(e.child)&&e.child.forEach((e=>{const r=i(e);t.appendChild(r)})),t};e.forEach((e=>{const t=i(e);s.appendChild(t)})),this.root.appendChild(s)}}export default Fiple;
